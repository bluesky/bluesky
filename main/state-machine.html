
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Interruptions &#8212; bluesky 1.13.1rc3.dev20+g0d25c16e documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=b3065823"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'state-machine';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://blueskyproject.io/bluesky/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.13.1rc3.dev20+g0d25c16e';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="bluesky.suspenders.SuspendBoolHigh" href="generated/bluesky.suspenders.SuspendBoolHigh.html" />
    <link rel="prev" title="bluesky.callbacks.best_effort.BestEffortCallback.disable_plots" href="generated/bluesky.callbacks.best_effort.BestEffortCallback.disable_plots.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.13.1rc3.dev20+g0d25c16e" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/bluesky-logo-dark.svg" class="logo__image only-light" alt=""/>
    <img src="_static/bluesky-logo-dark.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">bluesky</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="userindex.html">
    User Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="devindex.html">
    Developer Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/bluesky">
    bluesky
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/ophyd">
    ophyd
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/databroker">
    databroker
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://nsls-ii.github.io/amostra">
    amostra
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://nsls-ii.github.io/datamuxer">
    datamuxer
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://blueskyproject.io/suitcase">
    suitcase
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/NSLS-II/">
    NSLS-II Repositories
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/NSLS-II/Bug-Reports/issues">
    Bug Reports
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/bluesky" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/bluesky" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="userindex.html">
    User Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="devindex.html">
    Developer Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/bluesky">
    bluesky
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/ophyd">
    ophyd
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/databroker">
    databroker
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://nsls-ii.github.io/amostra">
    amostra
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://nsls-ii.github.io/datamuxer">
    datamuxer
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/suitcase">
    suitcase
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/NSLS-II/">
    NSLS-II Repositories
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/NSLS-II/Bug-Reports/issues">
    Bug Reports
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/bluesky" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/bluesky" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="plans.html">Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="documents.html">Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Recording Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="callbacks.html">Live Visualization and Processing</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Interruptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation.html">Simulation and Error Checking</a></li>
<li class="toctree-l1"><a class="reference internal" href="progress-bar.html">Progress Bar</a></li>
<li class="toctree-l1"><a class="reference internal" href="event_descriptors.html">Event Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="async.html">Asynchronous Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_run_plans.html">Multi-Run Plans</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging and Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_engine_api.html">RunEngine API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utility classes and functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="magics.html">IPython ‘Magics’ [Experimental]</a></li>
<li class="toctree-l1"><a class="reference internal" href="otel-tracing.html">Tracing with Opentelemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="from-pyepics-to-bluesky.html">Translating Direct PyEpics Code to Bluesky Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison-with-spec.html">Comparison with SPEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware-interfaces.html">Hardware Interface Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="userindex.html" class="nav-link">User Documentation</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Interruptions</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="interruptions">
<h1>Interruptions<a class="headerlink" href="#interruptions" title="Link to this heading">#</a></h1>
<p>The RunEngine can be safely interrupted and resumed. All plans get this
feature “for free.”</p>
<section id="pausing-interactively">
<span id="id1"></span><h2>Pausing Interactively<a class="headerlink" href="#pausing-interactively" title="Link to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Looking for a quick refresher on pausing, resuming, or aborting
interactively? Skip to the <a class="reference internal" href="#interactive-pause-summary"><span class="std std-ref">Summary</span></a>.</p>
</div>
<p>While the RunEngine is executing a plan, it captures SIGINT (Ctrl+C).</p>
<section id="pause-now-ctrl-c-twice">
<h3>Pause Now: Ctrl+C twice<a class="headerlink" href="#pause-now-ctrl-c-twice" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">2</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2018</span><span class="o">/</span><span class="mi">02</span><span class="o">/</span><span class="mi">12</span> <span class="mi">12</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">12</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;33a16823-e214-4952-abdd-032a78b8478f&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>      <span class="n">motor</span> <span class="o">|</span>        <span class="n">det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">13.3</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>      <span class="mf">0.607</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">14.3</span> <span class="o">|</span>      <span class="mf">2.000</span> <span class="o">|</span>      <span class="mf">0.135</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">15.3</span> <span class="o">|</span>      <span class="mf">3.000</span> <span class="o">|</span>      <span class="mf">0.011</span> <span class="o">|</span>
<span class="o">^</span><span class="n">C</span>
<span class="n">A</span> <span class="s1">&#39;deferred pause&#39;</span> <span class="n">has</span> <span class="n">been</span> <span class="n">requested</span><span class="o">.</span> <span class="n">The</span> <span class="n">RunEngine</span> <span class="n">will</span> <span class="n">pause</span> <span class="n">at</span> <span class="n">the</span> <span class="nb">next</span> <span class="n">checkpoint</span><span class="o">.</span> <span class="n">To</span> <span class="n">pause</span> <span class="n">immediately</span><span class="p">,</span> <span class="n">hit</span> <span class="n">Ctrl</span><span class="o">+</span><span class="n">C</span> <span class="n">again</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">next</span> <span class="mi">10</span> <span class="n">seconds</span><span class="o">.</span>
<span class="n">Deferred</span> <span class="n">pause</span> <span class="n">acknowledged</span><span class="o">.</span> <span class="n">Continuing</span> <span class="n">to</span> <span class="n">checkpoint</span><span class="o">.</span>
<span class="o">^</span><span class="n">C</span>
<span class="n">Pausing</span><span class="o">...</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="n">RunEngineInterrupted</span>                      <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="mi">826</span><span class="n">ee9dfb918</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="o">~/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Repos</span><span class="o">/</span><span class="n">bluesky</span><span class="o">/</span><span class="n">bluesky</span><span class="o">/</span><span class="n">run_engine</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata_kw</span><span class="p">)</span>
    <span class="mi">670</span>
    <span class="mi">671</span>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interrupted</span><span class="p">:</span>
<span class="o">--&gt;</span> <span class="mi">672</span>                 <span class="k">raise</span> <span class="n">RunEngineInterrupted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pause_msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
    <span class="mi">673</span>
    <span class="mi">674</span>         <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_run_start_uids</span><span class="p">)</span>

<span class="n">RunEngineInterrupted</span><span class="p">:</span>
<span class="n">Your</span> <span class="n">RunEngine</span> <span class="ow">is</span> <span class="n">entering</span> <span class="n">a</span> <span class="n">paused</span> <span class="n">state</span><span class="o">.</span> <span class="n">These</span> <span class="n">are</span> <span class="n">your</span> <span class="n">options</span> <span class="k">for</span> <span class="n">changing</span>
<span class="n">the</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">RunEngine</span><span class="p">:</span>

<span class="n">RE</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>    <span class="n">Resume</span> <span class="n">the</span> <span class="n">plan</span><span class="o">.</span>
<span class="n">RE</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span>     <span class="n">Perform</span> <span class="n">cleanup</span><span class="p">,</span> <span class="n">then</span> <span class="n">kill</span> <span class="n">plan</span><span class="o">.</span> <span class="n">Mark</span> <span class="n">exit_stats</span><span class="o">=</span><span class="s1">&#39;aborted&#39;</span><span class="o">.</span>
<span class="n">RE</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>      <span class="n">Perform</span> <span class="n">cleanup</span><span class="p">,</span> <span class="n">then</span> <span class="n">kill</span> <span class="n">plan</span><span class="o">.</span> <span class="n">Mark</span> <span class="n">exit_status</span><span class="o">=</span><span class="s1">&#39;success&#39;</span><span class="o">.</span>
<span class="n">RE</span><span class="o">.</span><span class="n">halt</span><span class="p">()</span>      <span class="n">Emergency</span> <span class="n">Stop</span><span class="p">:</span> <span class="n">Do</span> <span class="ow">not</span> <span class="n">perform</span> <span class="n">cleanup</span> <span class="o">---</span> <span class="n">just</span> <span class="n">stop</span><span class="o">.</span>
</pre></div>
</div>
<p>Before returning the prompt to the user, the RunEngine ensures that all motors
that it has touched are stopped. It also performs any device-specific cleanup
defined in the device’s (optional) <code class="docutils literal notranslate"><span class="pre">pause()</span></code> method.</p>
<p>If execution is later resumed, the RunEngine will “rewind” through the plan to
the most recent <a class="reference internal" href="#checkpoints"><span class="std std-ref">checkpoint</span></a>, the last safe place to restart.</p>
</section>
<section id="pause-soon-ctrl-c-once">
<h3>Pause Soon: Ctrl+C once<a class="headerlink" href="#pause-soon-ctrl-c-once" title="Link to this heading">#</a></h3>
<p>Pause at the next <a class="reference internal" href="#checkpoints"><span class="std std-ref">checkpoint</span></a>: typically, the next step in
a step scan. We call this “deferred pause.” It avoids having to repeat any work
when the plan is resumed.</p>
<p>Notice that this time when Ctrl+C (^C) is hit, the current step (4) is allowed
to complete before execution is paused.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">Transient</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="mi">1</span>     <span class="n">Time</span><span class="p">:</span> <span class="mi">2018</span><span class="o">/</span><span class="mi">02</span><span class="o">/</span><span class="mi">12</span> <span class="mi">12</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">36</span>
<span class="n">Persistent</span> <span class="n">Unique</span> <span class="n">Scan</span> <span class="n">ID</span><span class="p">:</span> <span class="s1">&#39;c5db9bb4-fb7f-49f4-948b-72fb716d1f67&#39;</span>
<span class="n">New</span> <span class="n">stream</span><span class="p">:</span> <span class="s1">&#39;primary&#39;</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>   <span class="n">seq_num</span> <span class="o">|</span>       <span class="n">time</span> <span class="o">|</span>      <span class="n">motor</span> <span class="o">|</span>        <span class="n">det</span> <span class="o">|</span>
<span class="o">+-----------+------------+------------+------------+</span>
<span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mf">37.6</span> <span class="o">|</span>      <span class="mf">1.000</span> <span class="o">|</span>      <span class="mf">0.607</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mf">38.7</span> <span class="o">|</span>      <span class="mf">2.000</span> <span class="o">|</span>      <span class="mf">0.135</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">3</span> <span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mf">39.7</span> <span class="o">|</span>      <span class="mf">3.000</span> <span class="o">|</span>      <span class="mf">0.011</span> <span class="o">|</span>
<span class="o">^</span><span class="n">CA</span> <span class="s1">&#39;deferred pause&#39;</span> <span class="n">has</span> <span class="n">been</span> <span class="n">requested</span><span class="o">.</span> <span class="n">The</span> <span class="n">RunEngine</span> <span class="n">will</span> <span class="n">pause</span> <span class="n">at</span> <span class="n">the</span> <span class="nb">next</span> <span class="n">checkpoint</span><span class="o">.</span> <span class="n">To</span> <span class="n">pause</span> <span class="n">immediately</span><span class="p">,</span> <span class="n">hit</span> <span class="n">Ctrl</span><span class="o">+</span><span class="n">C</span> <span class="n">again</span> <span class="ow">in</span> <span class="n">the</span> <span class="nb">next</span> <span class="mi">10</span> <span class="n">seconds</span><span class="o">.</span>
<span class="n">Deferred</span> <span class="n">pause</span> <span class="n">acknowledged</span><span class="o">.</span> <span class="n">Continuing</span> <span class="n">to</span> <span class="n">checkpoint</span><span class="o">.</span>
<span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span> <span class="mi">12</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mf">40.7</span> <span class="o">|</span>      <span class="mf">4.000</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="n">Pausing</span><span class="o">...</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="n">RunEngineInterrupted</span>                      <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">826</span><span class="n">ee9dfb918</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="o">~/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Repos</span><span class="o">/</span><span class="n">bluesky</span><span class="o">/</span><span class="n">bluesky</span><span class="o">/</span><span class="n">run_engine</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata_kw</span><span class="p">)</span>
    <span class="mi">670</span>
    <span class="mi">671</span>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interrupted</span><span class="p">:</span>
<span class="o">--&gt;</span> <span class="mi">672</span>                 <span class="k">raise</span> <span class="n">RunEngineInterrupted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pause_msg</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
    <span class="mi">673</span>
    <span class="mi">674</span>         <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_run_start_uids</span><span class="p">)</span>

<span class="n">RunEngineInterrupted</span><span class="p">:</span>
<span class="n">Your</span> <span class="n">RunEngine</span> <span class="ow">is</span> <span class="n">entering</span> <span class="n">a</span> <span class="n">paused</span> <span class="n">state</span><span class="o">.</span> <span class="n">These</span> <span class="n">are</span> <span class="n">your</span> <span class="n">options</span> <span class="k">for</span> <span class="n">changing</span>
<span class="n">the</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">RunEngine</span><span class="p">:</span>

<span class="n">RE</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>    <span class="n">Resume</span> <span class="n">the</span> <span class="n">plan</span><span class="o">.</span>
<span class="n">RE</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span>     <span class="n">Perform</span> <span class="n">cleanup</span><span class="p">,</span> <span class="n">then</span> <span class="n">kill</span> <span class="n">plan</span><span class="o">.</span> <span class="n">Mark</span> <span class="n">exit_stats</span><span class="o">=</span><span class="s1">&#39;aborted&#39;</span><span class="o">.</span>
<span class="n">RE</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>      <span class="n">Perform</span> <span class="n">cleanup</span><span class="p">,</span> <span class="n">then</span> <span class="n">kill</span> <span class="n">plan</span><span class="o">.</span> <span class="n">Mark</span> <span class="n">exit_status</span><span class="o">=</span><span class="s1">&#39;success&#39;</span><span class="o">.</span>
<span class="n">RE</span><span class="o">.</span><span class="n">halt</span><span class="p">()</span>      <span class="n">Emergency</span> <span class="n">Stop</span><span class="p">:</span> <span class="n">Do</span> <span class="ow">not</span> <span class="n">perform</span> <span class="n">cleanup</span> <span class="o">---</span> <span class="n">just</span> <span class="n">stop</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="what-to-do-after-pausing">
<h3>What to do after pausing<a class="headerlink" href="#what-to-do-after-pausing" title="Link to this heading">#</a></h3>
<p>After being paused, the RunEngine holds on to information that it might need in
order to resume later. It “knows” that it is in a paused state, and you can
check that at any time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">RE</span><span class="o">.</span><span class="n">state</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="s1">&#39;paused&#39;</span>
</pre></div>
</div>
<p>During the pause, we can do anything: check readings, move motors, etc. It will
not allow you to execute a new plan until the current one is either resumed or
terminated. Your options are:</p>
<section id="resume">
<h4>Resume<a class="headerlink" href="#resume" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">RE</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
<span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span> <span class="mi">07</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mf">29.5</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">5.714</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">5</span> <span class="o">|</span> <span class="mi">07</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mf">29.5</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">4.286</span> <span class="o">|</span>      <span class="mf">0.000</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">6</span> <span class="o">|</span> <span class="mi">07</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mf">29.6</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">2.857</span> <span class="o">|</span>      <span class="mf">0.017</span> <span class="o">|</span>
<span class="o">|</span>         <span class="mi">7</span> <span class="o">|</span> <span class="mi">07</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mf">29.7</span> <span class="o">|</span>     <span class="o">-</span><span class="mf">1.429</span> <span class="o">|</span>      <span class="mf">0.360</span> <span class="o">|</span>
<span class="p">(</span><span class="n">etc</span><span class="o">.</span><span class="p">)</span>
</pre></div>
</div>
<p>Depending on the plan, it may “rewind” to safely continue on and ensure all
data is collected correctly.</p>
</section>
<section id="abort">
<h4>Abort<a class="headerlink" href="#abort" title="Link to this heading">#</a></h4>
<p>Allow the plan to perform any final cleanup. For example, some plans move
motors back to their starting positions. Mark the data as having been aborted,
so that this fact can be noted (if desired) in later analysis. All of the data
collected up this point will be saved regardless.</p>
<p>From a paused state:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">RE</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span>
<span class="n">Aborting</span><span class="o">...</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="p">[</span><span class="s1">&#39;8ef9388c-75d3-498c-a800-3b0bd24b88ed&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="stop">
<h4>Stop<a class="headerlink" href="#stop" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">RE.stop()</span></code> is functionally identical to <code class="docutils literal notranslate"><span class="pre">RE.abort()</span></code>. The only
difference is that aborted runs are marked with <code class="docutils literal notranslate"><span class="pre">exit_status:</span> <span class="pre">'abort'</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">exit_status:</span> <span class="pre">'success'</span></code>. This may be a useful distinction
during analysis.</p>
</section>
<section id="halt">
<h4>Halt<a class="headerlink" href="#halt" title="Link to this heading">#</a></h4>
<p>Aborting or stopping allows the plan to perform cleanup. We already mentioned
the example of a plan moving motors back to their starting positions at the
end.</p>
<p>In some situations, you may wish to prevent the plan from doing <em>anything</em>
— you want to halt immediately, skipping cleanup. For this, use
<code class="docutils literal notranslate"><span class="pre">RE.halt()</span></code>.</p>
</section>
</section>
<section id="summary">
<span id="interactive-pause-summary"></span><h3>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h3>
<section id="interactively-interrupt-execution">
<h4>Interactively Interrupt Execution<a class="headerlink" href="#interactively-interrupt-execution" title="Link to this heading">#</a></h4>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Outcome</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ctrl+C</p></td>
<td><p>Pause soon.</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+C twice</p></td>
<td><p>Pause now.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="from-a-paused-state">
<h4>From a paused state<a class="headerlink" href="#from-a-paused-state" title="Link to this heading">#</a></h4>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Outcome</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RE.resume()</p></td>
<td><p>Safely resume plan.</p></td>
</tr>
<tr class="row-odd"><td><p>RE.abort()</p></td>
<td><p>Perform cleanup. Mark as aborted.</p></td>
</tr>
<tr class="row-even"><td><p>RE.stop()</p></td>
<td><p>Perform cleanup. Mark as success.</p></td>
</tr>
<tr class="row-odd"><td><p>RE.halt()</p></td>
<td><p>Do not perform cleanup — just stop.</p></td>
</tr>
<tr class="row-even"><td><p>RE.state</p></td>
<td><p>Check if ‘paused’ or ‘idle’.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="automated-suspension">
<span id="suspenders"></span><h2>Automated Suspension<a class="headerlink" href="#automated-suspension" title="Link to this heading">#</a></h2>
<p>It can also be useful to interrupt execution automatically in response to some
condition (e.g., shutter closed, beam dumped, temperature exceeded some limit).
We use the word <em>suspension</em> to mean an unplanned pause initialized by some
agent running the background. The agent (a “suspender”) monitors some condition
and, if it detects a problem, it suspends execution. When it detects that
conditions have returned to normal, it gives the RunEngine permission to resume
after some interval. This can operate unattended.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">RE</span><span class="p">(</span><span class="n">scan</span><span class="p">([</span><span class="n">det</span><span class="p">],</span> <span class="n">motor</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">LiveTable</span><span class="p">([</span><span class="n">motor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">det</span><span class="o">.</span><span class="n">name</span><span class="p">]))</span>
<span class="go">+------------+-------------------+----------------+----------------+</span>
<span class="go">|   seq_num  |             time  |         motor  |           det  |</span>
<span class="go">+------------+-------------------+----------------+----------------+</span>
<span class="go">|         1  |  16:46:08.953815  |          0.03  |        290.00  |</span>
<span class="go">Suspending....To get prompt hit Ctrl-C to pause the scan</span>
<span class="go">|         2  |  16:46:20.868445  |          0.09  |        279.00  |</span>
<span class="go">|         3  |  16:46:29.077690  |          0.16  |        284.00  |</span>
<span class="go">|         4  |  16:46:33.540643  |          0.23  |        278.00  |</span>
<span class="go">+------------+-------------------+----------------+----------------+</span>
</pre></div>
</div>
<p>A <em>suspended</em> plan does not return the prompt to the user. Like a paused plan,
it stops executing new instructions and rewinds to the most recent checkpoint.
But unlike a paused plan, it resumes execution automatically when conditions
return to normal.</p>
<p>To take manual control of a suspended plan, pause it by hitting Ctrl+C twice.
You will be given the prompt. When conditions are good again, you may manually
resume using <code class="docutils literal notranslate"><span class="pre">RE.resume()</span></code>.</p>
<section id="installing-suspenders">
<span id="id2"></span><h3>Installing Suspenders<a class="headerlink" href="#installing-suspenders" title="Link to this heading">#</a></h3>
<p>Bluesky includes several “suspenders” that work with ophyd Signals to monitor
conditions and suspend execution. It’s also possible to write suspenders
from scratch to monitor anything at all.</p>
<p>We’ll start with an example.</p>
<section id="example-suspend-a-plan-if-the-beam-current-dips-low">
<h4>Example: Suspend a plan if the beam current dips low<a class="headerlink" href="#example-suspend-a-plan-if-the-beam-current-dips-low" title="Link to this heading">#</a></h4>
<p>This defines a suspender and installs it on the RunEngine. With this, plans
will be automatically suspended when the <code class="docutils literal notranslate"><span class="pre">beam_current</span></code> signal goes below 2
and resumed once it exceeds 3.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ophyd</span><span class="w"> </span><span class="kn">import</span> <span class="n">EpicsSignal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bluesky.suspenders</span><span class="w"> </span><span class="kn">import</span> <span class="n">SuspendFloor</span>

<span class="n">beam_current</span> <span class="o">=</span> <span class="n">EpicsSignal</span><span class="p">(</span><span class="s1">&#39;...PV string...&#39;</span><span class="p">)</span>
<span class="n">sus</span> <span class="o">=</span> <span class="n">SuspendFloor</span><span class="p">(</span><span class="n">beam_current</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">resume_thresh</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">RE</span><span class="o">.</span><span class="n">install_suspender</span><span class="p">(</span><span class="n">sus</span><span class="p">)</span>
</pre></div>
</div>
<p>In the following example, the beam current dipped below 2 in the middle of
taking the second data point. It later recovered.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">RE</span><span class="p">(</span><span class="n">my_scan</span><span class="p">)</span>
<span class="go">+------------+-------------------+----------------+----------------+</span>
<span class="go">|   seq_num  |             time  |         theta  |    sclr_chan4  |</span>
<span class="go">+------------+-------------------+----------------+----------------+</span>
<span class="go">|         1  |  16:46:08.953815  |          0.03  |        290.00  |</span>
<span class="go">Suspending....To get prompt hit Ctrl-C to pause the scan</span>
<span class="go">|         2  |  16:46:20.868445  |          0.09  |        279.00  |</span>
<span class="go">|         3  |  16:46:29.077690  |          0.16  |        284.00  |</span>
<span class="go">|         4  |  16:46:33.540643  |          0.23  |        278.00  |</span>
<span class="go">+------------+-------------------+----------------+----------------+</span>
</pre></div>
</div>
<p>Notice that the plan was suspended and then resumed. When it resumed, it went
back to the last checkpoint and re-took the second data point cleanly.</p>
<p>See the API documentation (follow the links in the table below) for other
suspender types and options, including a waiting period and cleanup
procedures to run pre-suspend and pre-resume.</p>
</section>
</section>
<section id="built-in-suspenders">
<h3>Built-in Suspenders<a class="headerlink" href="#built-in-suspenders" title="Link to this heading">#</a></h3>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/bluesky.suspenders.SuspendBoolHigh.html#bluesky.suspenders.SuspendBoolHigh" title="bluesky.suspenders.SuspendBoolHigh"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bluesky.suspenders.SuspendBoolHigh</span></code></a></p></td>
<td><p>Suspend when a boolean signal goes high; resume when it goes low.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/bluesky.suspenders.SuspendBoolLow.html#bluesky.suspenders.SuspendBoolLow" title="bluesky.suspenders.SuspendBoolLow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bluesky.suspenders.SuspendBoolLow</span></code></a></p></td>
<td><p>Suspend when a boolean signal goes low; resume when it goes high.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/bluesky.suspenders.SuspendFloor.html#bluesky.suspenders.SuspendFloor" title="bluesky.suspenders.SuspendFloor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bluesky.suspenders.SuspendFloor</span></code></a></p></td>
<td><p>Suspend when a scalar falls below a threshold.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/bluesky.suspenders.SuspendCeil.html#bluesky.suspenders.SuspendCeil" title="bluesky.suspenders.SuspendCeil"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bluesky.suspenders.SuspendCeil</span></code></a></p></td>
<td><p>Suspend when a scalar rises above a threshold.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/bluesky.suspenders.SuspendWhenOutsideBand.html#bluesky.suspenders.SuspendWhenOutsideBand" title="bluesky.suspenders.SuspendWhenOutsideBand"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bluesky.suspenders.SuspendWhenOutsideBand</span></code></a></p></td>
<td><p>Suspend when a scalar signal leaves a given band of values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/bluesky.suspenders.SuspendWhenChanged.html#bluesky.suspenders.SuspendWhenChanged" title="bluesky.suspenders.SuspendWhenChanged"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bluesky.suspenders.SuspendWhenChanged</span></code></a></p></td>
<td><p>Suspend when the monitored value deviates from the expected.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="checkpoints">
<span id="id3"></span><h2>Checkpoints<a class="headerlink" href="#checkpoints" title="Link to this heading">#</a></h2>
<p>Plans are specified as a sequence of <a class="reference internal" href="msg.html#msg"><span class="std std-ref">messages</span></a>, granular
instructions like ‘read’ and ‘set’. The messages can optionally include one
or more ‘checkpoint’ messages, indicating a place where it is safe to resume
after an interruption. For example, checkpoints are placed before each step of a
<a class="reference internal" href="generated/bluesky.plans.scan.html#bluesky.plans.scan" title="bluesky.plans.scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plans.scan()</span></code></a>.</p>
<p>Some experiments are not resumable: for example, the sample may be melting or
aging. Incorporating <a class="reference internal" href="generated/bluesky.plan_stubs.clear_checkpoint.html#bluesky.plan_stubs.clear_checkpoint" title="bluesky.plan_stubs.clear_checkpoint"><code class="xref py py-func docutils literal notranslate"><span class="pre">bluesky.plan_stubs.clear_checkpoint()</span></code></a> in a plan
makes it un-resuming. If a pause or suspension are requested, the plan will
abort instead.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some details about checkpoints and when they are allowed:</p>
<p>It is not legal to create a checkpoint in the middle of a data point
(between ‘create’ and ‘save’). Checkpoints are implicitly created after
actions that it is not safe to replay: staging a device, adding a
monitor, or adding a subscription.</p>
</div>
</section>
<section id="planned-pauses">
<span id="id4"></span><h2>Planned Pauses<a class="headerlink" href="#planned-pauses" title="Link to this heading">#</a></h2>
<p>Pausing is typically done <a class="reference internal" href="#pausing-interactively"><span class="std std-ref">interactively</span></a> (Ctrl+C)
but it can also be incorporated into a plan. The plan can pause the RunEngine,
requiring the user to type <code class="docutils literal notranslate"><span class="pre">RE.resume()</span></code> to continue or <code class="docutils literal notranslate"><span class="pre">RE.stop()</span></code>
(or similar) to clean up and stop.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">bluesky.plan_stubs</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bps</span>

<span class="k">def</span><span class="w"> </span><span class="nf">pausing_plan</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield from</span> <span class="n">some_plan</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Type RE.resume() to go again or RE.stop() to stop.&quot;</span><span class="p">)</span>
        <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">checkpoint</span><span class="p">()</span>  <span class="c1"># marking where to resume from</span>
        <span class="k">yield from</span> <span class="n">bps</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="associated-runengine-interface">
<h2>Associated RunEngine Interface<a class="headerlink" href="#associated-runengine-interface" title="Link to this heading">#</a></h2>
<section id="state">
<h3>State<a class="headerlink" href="#state" title="Link to this heading">#</a></h3>
<p>The RunEngine has a state machine defining its phases of operation and the
allowed transitions between them. As illustrated above, it can be inspected via
the <code class="docutils literal notranslate"><span class="pre">state</span></code> property.</p>
<p>The states are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'idle'</span></code>: RunEngine is waiting for instructions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'running'</span></code>: RunEngine is executing instructions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'paused'</span></code>: RunEngine is waiting for user input.</p></li>
</ul>
</section>
<section id="suspender-related-methods">
<h3>Suspender-related Methods<a class="headerlink" href="#suspender-related-methods" title="Link to this heading">#</a></h3>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">install_suspender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suspender</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.install_suspender"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Install a ‘suspender’, which can suspend and resume execution.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>suspender</strong><span class="classifier"><cite>bluesky.suspenders.SuspenderBase</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.remove_suspender.html#bluesky.run_engine.RunEngine.remove_suspender" title="bluesky.run_engine.RunEngine.remove_suspender"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.remove_suspender()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.clear_suspenders.html#bluesky.run_engine.RunEngine.clear_suspenders" title="bluesky.run_engine.RunEngine.clear_suspenders"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.clear_suspenders()</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">remove_suspender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suspender</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.remove_suspender"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Uninstall a suspender.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>suspender</strong><span class="classifier"><cite>bluesky.suspenders.SuspenderBase</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.install_suspender.html#bluesky.run_engine.RunEngine.install_suspender" title="bluesky.run_engine.RunEngine.install_suspender"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.install_suspender()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.clear_suspenders.html#bluesky.run_engine.RunEngine.clear_suspenders" title="bluesky.run_engine.RunEngine.clear_suspenders"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.clear_suspenders()</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">clear_suspenders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.clear_suspenders"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Uninstall all suspenders.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.install_suspender.html#bluesky.run_engine.RunEngine.install_suspender" title="bluesky.run_engine.RunEngine.install_suspender"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.install_suspender()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.remove_suspender.html#bluesky.run_engine.RunEngine.remove_suspender" title="bluesky.run_engine.RunEngine.remove_suspender"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.remove_suspender()</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

<p>The RunEngine also has a <code class="docutils literal notranslate"><span class="pre">suspenders</span></code> property, a collection of the
currently-installed suspenders.</p>
</section>
<section id="request-methods">
<h3>Request Methods<a class="headerlink" href="#request-methods" title="Link to this heading">#</a></h3>
<p>This method is called when Ctrl+C is pressed or when a ‘pause’ Message is
processed. It can also be called by user-defined agents. See the next example.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">request_pause</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">defer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.request_pause"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Command the Run Engine to pause.</p>
<p>This function is called by ‘pause’ Messages. It can also be called
by other threads. It cannot be called on the main thread during a run,
but it is called by SIGINT (i.e., Ctrl+C).</p>
<p>If there current run has no checkpoint (via the ‘clear_checkpoint’
message), this will cause the run to abort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>defer</strong><span class="classifier">bool, optional</span></dt><dd><p>If False, pause immediately before processing any new messages.
If True, pause at the next checkpoint.
False by default.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<p>This method is used by the <code class="docutils literal notranslate"><span class="pre">PVSuspend*</span></code> classes above. It can also be called
by user-defined agents.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">request_suspend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fut</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre_plan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_plan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">justification</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.request_suspend"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Request that the run suspend itself until the future is finished.</p>
<p>The two plans will be run before and after waiting for the future.
This enable doing things like opening and closing shutters and
resetting cameras around a suspend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fut</strong><span class="classifier">asyncio.Future</span></dt><dd></dd>
<dt><strong>pre_plan</strong><span class="classifier">iterable or callable, optional</span></dt><dd><p>Plan to execute just before suspending. If callable, must
take no arguments.</p>
</dd>
<dt><strong>post_plan</strong><span class="classifier">iterable or callable, optional</span></dt><dd><p>Plan to execute just before resuming. If callable, must
take no arguments.</p>
</dd>
<dt><strong>justification</strong><span class="classifier">str, optional</span></dt><dd><p>explanation of why the suspension has been requested</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="example-requesting-a-pause-from-the-asyncio-event-loop">
<h3>Example: Requesting a pause from the asyncio event loop<a class="headerlink" href="#example-requesting-a-pause-from-the-asyncio-event-loop" title="Link to this heading">#</a></h3>
<p>Since the user does not have control of the prompt, calls to
<code class="docutils literal notranslate"><span class="pre">RE.request_pause</span></code> must be planned in advance. Here is a example that pauses
the plan after 5 seconds.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">bluesky.plan_stubs</span><span class="w"> </span><span class="kn">import</span> <span class="n">null</span>

<span class="k">def</span><span class="w"> </span><span class="nf">loop_forever</span><span class="p">():</span>
    <span class="s2">&quot;a silly plan&quot;</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield from</span> <span class="n">null</span><span class="p">()</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<span class="c1"># Request a pause 5 seconds from now.</span>
<span class="n">loop</span><span class="o">.</span><span class="n">call_later</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">RE</span><span class="o">.</span><span class="n">request_pause</span><span class="p">)</span>

<span class="c1"># Execute the plan.</span>
<span class="n">RE</span><span class="p">(</span><span class="n">loop_forever</span><span class="p">())</span>

<span class="c1"># Five seconds after ``call_later`` was run, the plan is paused.</span>
<span class="c1"># Observe that the RunEngine is in a &#39;paused&#39; state.</span>
<span class="n">RE</span><span class="o">.</span><span class="n">state</span>
</pre></div>
</div>
<p>Above, we passed <code class="docutils literal notranslate"><span class="pre">True</span></code> to <code class="docutils literal notranslate"><span class="pre">RE.request_pause</span></code> to request a deferred pause.</p>
</section>
</section>
<section id="experimental-record-interruptions">
<h2>Experimental: Record Interruptions<a class="headerlink" href="#experimental-record-interruptions" title="Link to this heading">#</a></h2>
<p>In the analysis stage, it can be useful to know if and when a run was
interrupted.  This experimental feature creates a special event stream
recording the time and nature of any interruptions.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an experimental feature. It is tested but not yet widely used. It
might be changed or removed in the future.</p>
</div>
<p>Activate this feature by setting</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">RE</span><span class="o">.</span><span class="n">record_interruptions</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>In this mode, the RunEngine emits a special event descriptor after opening a
new run. This name field in the descriptor is ‘interruptions’. It has a single
data key:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;interruptions&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;RunEngine&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>Each time the RunEngine is paused, suspended, or resumed during the run, an
Event document for that descriptor is created. The data payload
<code class="docutils literal notranslate"><span class="pre">event['data']['interruptions']</span></code> is <code class="docutils literal notranslate"><span class="pre">'pause'</span></code>, <code class="docutils literal notranslate"><span class="pre">'suspend'</span></code>, or
<code class="docutils literal notranslate"><span class="pre">'resume'</span></code>. The associated time notes when the interruptions/resume was
processed.</p>
<p>To see this in action, try this example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">bluesky.plans</span><span class="w"> </span><span class="kn">import</span> <span class="n">count</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bluesky.preprocessors</span><span class="w"> </span><span class="kn">import</span> <span class="n">pchain</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bluesky.plan_stubs</span><span class="w"> </span><span class="kn">import</span> <span class="n">pause</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ophyd.sim</span><span class="w"> </span><span class="kn">import</span> <span class="n">det</span>

<span class="n">RE</span><span class="o">.</span><span class="n">record_interruptions</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">RE</span><span class="p">(</span><span class="n">pchain</span><span class="p">(</span><span class="n">count</span><span class="p">([</span><span class="n">det</span><span class="p">]),</span> <span class="n">pause</span><span class="p">(),</span> <span class="n">count</span><span class="p">([</span><span class="n">det</span><span class="p">])),</span> <span class="nb">print</span><span class="p">)</span>
<span class="c1"># ... RunEngine pauses</span>
<span class="n">RE</span><span class="o">.</span><span class="n">resume</span><span class="p">()</span>
</pre></div>
</div>
<p>In the text that <code class="docutils literal notranslate"><span class="pre">print</span></code> dumps to the screen, look for the special
‘interruptions’ event descriptor and associated events.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="generated/bluesky.callbacks.best_effort.BestEffortCallback.disable_plots.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">bluesky.callbacks.best_effort.BestEffortCallback.disable_plots</p>
      </div>
    </a>
    <a class="right-next"
       href="generated/bluesky.suspenders.SuspendBoolHigh.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">bluesky.suspenders.SuspendBoolHigh</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pausing-interactively">Pausing Interactively</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pause-now-ctrl-c-twice">Pause Now: Ctrl+C twice</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pause-soon-ctrl-c-once">Pause Soon: Ctrl+C once</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-to-do-after-pausing">What to do after pausing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#resume">Resume</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#abort">Abort</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#stop">Stop</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#halt">Halt</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#interactively-interrupt-execution">Interactively Interrupt Execution</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#from-a-paused-state">From a paused state</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#automated-suspension">Automated Suspension</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-suspenders">Installing Suspenders</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-suspend-a-plan-if-the-beam-current-dips-low">Example: Suspend a plan if the beam current dips low</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-suspenders">Built-in Suspenders</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#checkpoints">Checkpoints</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#planned-pauses">Planned Pauses</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#associated-runengine-interface">Associated RunEngine Interface</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#state">State</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#suspender-related-methods">Suspender-related Methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#request-methods">Request Methods</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-requesting-a-pause-from-the-asyncio-event-loop">Example: Requesting a pause from the asyncio event loop</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experimental-record-interruptions">Experimental: Record Interruptions</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/bluesky/bluesky/edit/1.13.1rc3.dev20+g0d25c16e/docs/state-machine.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/state-machine.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2015, Brookhaven National Lab.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>