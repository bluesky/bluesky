
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Message Protocol &#8212; bluesky 1.14.dev44+g59c87bb8 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=ef2a1312"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'msg';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.0';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://blueskyproject.io/bluesky/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.14.dev44+g59c87bb8';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The RunEngine run loop" href="run_engine.html" />
    <link rel="prev" title="How Bluesky Interfaces with Hardware" href="hardware.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.14.dev44+g59c87bb8" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/bluesky-logo-dark.svg" class="logo__image only-light" alt=""/>
    <img src="_static/bluesky-logo-dark.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">bluesky</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="userindex.html">
    User Documentation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="devindex.html">
    Developer Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/bluesky">
    bluesky
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/ophyd">
    ophyd
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/databroker">
    databroker
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://nsls-ii.github.io/amostra">
    amostra
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://nsls-ii.github.io/datamuxer">
    datamuxer
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://blueskyproject.io/suitcase">
    suitcase
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/NSLS-II/">
    NSLS-II Repositories
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/NSLS-II/Bug-Reports/issues">
    Bug Reports
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/bluesky" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/bluesky" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="userindex.html">
    User Documentation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="devindex.html">
    Developer Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/bluesky">
    bluesky
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/ophyd">
    ophyd
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/databroker">
    databroker
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://nsls-ii.github.io/amostra">
    amostra
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://nsls-ii.github.io/datamuxer">
    datamuxer
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://blueskyproject.io/suitcase">
    suitcase
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/NSLS-II/">
    NSLS-II Repositories
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/NSLS-II/Bug-Reports/issues">
    Bug Reports
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/bluesky/bluesky" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/bluesky" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-cube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="hardware.html">How Bluesky Interfaces with Hardware</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Message Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_engine.html">The RunEngine run loop</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_changes.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="devindex.html" class="nav-link">Developer Documentation</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Message Protocol</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="message-protocol">
<span id="msg"></span><h1>Message Protocol<a class="headerlink" href="#message-protocol" title="Link to this heading">#</a></h1>
<p><em>Note: This is a technical document not optimized for user readability.</em></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>A <em>plan</em> is a sequence of atomic operations describing a data acquisition
procedure. Each operation is represented by a <code class="docutils literal notranslate"><span class="pre">bluesky.Msg</span></code> (“message”)
object. A plan may be implemented as a simple list of messages:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bluesky</span> <span class="kn">import</span> <span class="n">Msg</span>

<span class="c1"># (Behold, the most boring data acquisition ever conducted!)</span>
<span class="n">plan</span> <span class="o">=</span> <span class="p">[</span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;open_run&#39;</span><span class="p">),</span> <span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;close_run&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>or as a generator the yields messages one at time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plan</span><span class="p">():</span>
    <span class="k">yield</span> <span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;open_run&#39;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;close_run&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above examples are equivalent. For more sophisticated uses, the second one
is more powerful, as it can incorporate loops, conditionals, adaptive logic —
generally any Python code.</p>
<p>But, crucially, the plan code itself must not communicate with hardware.
(You should never put <code class="docutils literal notranslate"><span class="pre">epics.caput(...)</span></code> in a plan!) Rather, each operation
is represented by a <code class="docutils literal notranslate"><span class="pre">Msg</span></code> object that <em>describes</em> what should be done. This
makes it safe to introspect the plan for error-checking, simulation, and
visualization purposes — without touching real hardware. For example, we
could print each message in the plan like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plan</span> <span class="o">=</span> <span class="p">[</span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;open_run&#39;</span><span class="p">),</span> <span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;close_run&#39;</span><span class="p">)]</span>

<span class="c1"># a very, very simple &#39;plan simulator&#39;</span>
<span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">plan</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">Msg</span></code> has five members, accessible as attributes:</p>
<ul class="simple">
<li><p>command</p></li>
<li><p>obj</p></li>
<li><p>args</p></li>
<li><p>kwargs</p></li>
<li><p>run</p></li>
</ul>
<p>where <code class="docutils literal notranslate"><span class="pre">command</span></code> must be one of a controlled list of commands, <code class="docutils literal notranslate"><span class="pre">obj</span></code> is the
object (i.e. Device) to apply the command to, if applicable, <code class="docutils literal notranslate"><span class="pre">args</span></code> and
<code class="docutils literal notranslate"><span class="pre">kwargs</span></code> are arguments to the command and <code class="docutils literal notranslate"><span class="pre">run</span></code> is a user-defined run key.
The run key is used by Run Engine to associate each message with one of the open runs,
manage the state of each open run, and route run data to a separate set of callbacks
(see documentation on Multi-Run Plans).</p>
<p>To execute the plan, the <a class="reference internal" href="run_engine.html"><span class="doc">RunEngine</span></a> consumes it, one message at a time.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">very_simple_run_engine</span><span class="p">(</span><span class="n">plan</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">plan</span><span class="p">:</span>
        <span class="c1"># Process the msg.</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code> has a registry which is used to dispatch the <code class="docutils literal notranslate"><span class="pre">Msg</span></code> objects
based on the value of the <code class="docutils literal notranslate"><span class="pre">Msg.command</span></code>. For example, if the RunEngine
receives the message <code class="docutils literal notranslate"><span class="pre">Msg('set',</span> <span class="pre">motor,</span> <span class="pre">5)</span></code>, the RunEngine will:</p>
<ol class="arabic simple">
<li><p>Identify that the command for this message is <code class="docutils literal notranslate"><span class="pre">'set'</span></code>.</p></li>
<li><p>Look up <code class="docutils literal notranslate"><span class="pre">'set'</span></code> in its command registry and find that it is mapped to
<code class="docutils literal notranslate"><span class="pre">RunEngine._set</span></code>.</p></li>
<li><p>Pass <code class="docutils literal notranslate"><span class="pre">Msg('set',</span> <span class="pre">motor,</span> <span class="pre">5)</span></code> to its <code class="docutils literal notranslate"><span class="pre">_set</span></code> method.</p></li>
<li><p>Inside <code class="docutils literal notranslate"><span class="pre">_set</span></code>, call <code class="docutils literal notranslate"><span class="pre">motor.set(5)</span></code>. (This is where the actual
communication with hardware occurs.)</p></li>
<li><p>Update some internal caches that will be useful later. For example, it will
keep track of that fact that <code class="docutils literal notranslate"><span class="pre">motor</span></code> may be in motion so that it can stop
it safely if an error occurs. This illustrates another important reason that
plans must always yield messages to interact with hardware and absolutely
never communicate with hardware directly. Calling <code class="docutils literal notranslate"><span class="pre">epics.caput</span></code> inside a
plan prevents the RunEngine from knowing about it and thus circumvents
its facilities for putting devices in a safe state in the event of an
unexpected exit or error.</p></li>
</ol>
<p>A standard set of commands are registered by default.  By convention, a <code class="docutils literal notranslate"><span class="pre">Msg</span></code>
with the command <code class="docutils literal notranslate"><span class="pre">'name'</span></code> is mapped to a coroutine method on the RunEngine
named <code class="docutils literal notranslate"><span class="pre">_name</span></code>, as in <code class="docutils literal notranslate"><span class="pre">'set'</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">RunEngine._set</span></code> in the example above.
Users can register their own coroutines to add custom commands, though this is
very rarely necessary.</p>
<p>Some commands do not involve communication with hardware. For example,
<code class="docutils literal notranslate"><span class="pre">Msg('sleep',</span> <span class="pre">None,</span> <span class="pre">5)</span></code> causes the RunEngine to sleep for 5 seconds. <code class="docutils literal notranslate"><span class="pre">None</span></code>
is a placeholder for the “object” (Device) which is not applicable for a
<code class="docutils literal notranslate"><span class="pre">'sleep'</span></code> command. Just as plans should never communicate with hardware
directly, they should also never employ long blocking calls like
<code class="docutils literal notranslate"><span class="pre">time.sleep()</span></code>. Instead, the <code class="docutils literal notranslate"><span class="pre">'sleep'</span></code> command, mapped to
<code class="docutils literal notranslate"><span class="pre">RunEngine._sleep</span></code>, integrates with the RunEngine’s event loop to sleep in a
non-blocking way that allows for the RunEngine to stay responsive in the
meantime — watching for user interruptions and possibility collecting data
asynchronously in the background.</p>
<p>Other commands are used to control metadata and I/O. For example,
<code class="docutils literal notranslate"><span class="pre">Msg('open_run')</span></code> and <code class="docutils literal notranslate"><span class="pre">Msg('close_run')</span></code> delineate the scope of one run.
Any keyword arguments passed to the <code class="docutils literal notranslate"><span class="pre">'open_run'</span></code> message are interpreted as
metadata, encoded into the RunStart document.</p>
<p>The following is a comprehensive overview of the built-in commands.</p>
</section>
<section id="commands">
<span id="id1"></span><h2>Commands<a class="headerlink" href="#commands" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This section of the documentation is incomplete.</p>
</div>
<p>These are the ‘built in’ commands, some of which are deeply tied to the
state of the <cite>RunEngine</cite> instance.</p>
<section id="create">
<h3>create<a class="headerlink" href="#create" title="Link to this heading">#</a></h3>
<p>This command tells the run engine that it should start to collect the results
of <code class="docutils literal notranslate"><span class="pre">read</span></code> to create an event.  If this is called twice without a <code class="docutils literal notranslate"><span class="pre">save</span></code> or
<code class="docutils literal notranslate"><span class="pre">drop</span></code> between them it is an exception (as you can not have more than one
open event going at a time).</p>
<p>This relies very heavily on the internal state of the run engine and should not
be overridden by the user.</p>
<p>This call returns <cite>None</cite> back to the co-routine.</p>
<p>This ignores all parts of the <cite>Msg</cite> except the command.</p>
</section>
<section id="save">
<h3>save<a class="headerlink" href="#save" title="Link to this heading">#</a></h3>
<p>This is the pair to <code class="docutils literal notranslate"><span class="pre">create</span></code> which bundles and causes <code class="docutils literal notranslate"><span class="pre">Event</span></code> documents to
be emitted.  This must be called after a <code class="docutils literal notranslate"><span class="pre">create</span></code> or a the scan will die and
raise <cite>IllegalMessageSequence</cite>.</p>
<p>This relies very heavily on the internal state of the run engine and should not
be messed with.</p>
<p>This call returns <cite>None</cite> back to the co-routine.</p>
<p>This ignores all parts of the <cite>Msg</cite> except the command.</p>
</section>
<section id="read">
<h3>read<a class="headerlink" href="#read" title="Link to this heading">#</a></h3>
<p>This causes <cite>read</cite> to be called on the <code class="docutils literal notranslate"><span class="pre">obj</span></code> in the message</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="o">*</span><span class="n">msg</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">msg</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Anything that is read between a <code class="docutils literal notranslate"><span class="pre">create</span></code> and <code class="docutils literal notranslate"><span class="pre">save</span></code> will be bundled into
a single event.</p>
<p>This relies very heavily on the internal state of the run engine and should not
be messed with.</p>
<p>Returns the dictionary returned by <cite>read</cite> to the co-routine.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> parts of the message are passed to the <cite>read</cite>
method.</p>
</section>
<section id="null">
<h3>null<a class="headerlink" href="#null" title="Link to this heading">#</a></h3>
<p>This is a null message and is ignored by the run engine.  This exists to make
the algebra work.</p>
<p>Returns <cite>None</cite> to the co-routine.</p>
<p>Ignores all values in the <cite>Msg</cite> except the command.</p>
</section>
<section id="set">
<h3>set<a class="headerlink" href="#set" title="Link to this heading">#</a></h3>
<p>Tells a <code class="docutils literal notranslate"><span class="pre">Mover</span></code> object to move.  Currently this mimics the epics-like logic
of immediate motion.</p>
</section>
<section id="stage-and-unstage">
<h3>stage and unstage<a class="headerlink" href="#stage-and-unstage" title="Link to this heading">#</a></h3>
<p>Instruct the RunEngine to stage/unstage the object. This calls
<code class="docutils literal notranslate"><span class="pre">obj.stage()</span></code>/<code class="docutils literal notranslate"><span class="pre">obj.unstage</span></code>.</p>
<p>Expected message objects are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;stage&#39;</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
<span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;unstage&#39;</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
</pre></div>
</div>
<p>which results in these calls:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">staged_devices</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">stage</span><span class="p">()</span>
<span class="n">unstaged_devices</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">unstage</span><span class="p">()</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">staged_devices</span></code>/<code class="docutils literal notranslate"><span class="pre">unstaged_devices</span></code> are a list of the
<code class="docutils literal notranslate"><span class="pre">ophyd.Device</span></code> (s) that were (un)staged, not status objects.</p>
<p>One may wonder why the return is a list of Devices as opposed to Status
objects, such as in <code class="docutils literal notranslate"><span class="pre">set</span></code> and similar <code class="docutils literal notranslate"><span class="pre">Msg</span></code> s.
This was debated for awhile. Operations performed during staging are supposed
to involve twiddling configuration, and should happen fast. Staging should not
involve lengthy set calls.</p>
<p>Why a list of the objects staged? Staging a Device causes that Device’s
component Devices (if any) to also be staged. All of these children are added
to a list, along with [self], and returned by Device.stage(), so that the plan
can keep track of what has been staged, like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">devices_staged</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;stage&#39;</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
<p>Why would the plan want to know that? It needs to avoid accidentally trying to
stage something twice, such as a staging a parent and then trying to also stage
its child. It’s important to avoid that because staging something redundantly
raises an error.</p>
</section>
<section id="trigger">
<h3>trigger<a class="headerlink" href="#trigger" title="Link to this heading">#</a></h3>
<p>This will call the <code class="docutils literal notranslate"><span class="pre">obj.trigger</span></code> method and cache the returned status object
and caches the returned status object.</p>
</section>
<section id="sleep">
<h3>sleep<a class="headerlink" href="#sleep" title="Link to this heading">#</a></h3>
<p>Sleep the event loop.</p>
</section>
<section id="wait">
<h3>wait<a class="headerlink" href="#wait" title="Link to this heading">#</a></h3>
<p>Block progress until every object that was triggered or set the keyword
argument <cite>group=&lt;GROUP&gt;</cite> is done.</p>
<p>Expected message object is:</p>
<p>Msg(‘wait’, group=&lt;GROUP&gt;)</p>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;GROUP&gt;</span></code> is any hashable key.</p>
</section>
<section id="wait-for">
<h3>wait_for<a class="headerlink" href="#wait-for" title="Link to this heading">#</a></h3>
<p>Instruct the <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code> to wait for this <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> object to be
done. This allows for external arbitrary control of the <code class="docutils literal notranslate"><span class="pre">RunEngine</span></code>.
Ex</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">asyncio.futures</span> <span class="kn">import</span> <span class="n">Future</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">Future</span><span class="p">()</span>
<span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># will give false</span>
<span class="n">RE</span><span class="p">(</span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;wait_for&#39;</span><span class="p">,</span> <span class="p">[</span><span class="k">lambda</span> <span class="p">:</span> <span class="n">future</span> <span class="p">,]))</span>
<span class="c1"># this sets the future to done</span>
<span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># will give True</span>
</pre></div>
</div>
<p>Returns a set of the tasks that were waited on.
Ex</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">asyncio.futures</span> <span class="kn">import</span> <span class="n">Future</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">Future</span><span class="p">()</span>
<span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="c1"># will give false</span>
<span class="k">def</span> <span class="nf">plan</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">(</span><span class="k">yield</span> <span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;wait_for&#39;</span><span class="p">,</span> <span class="p">[</span><span class="k">lambda</span> <span class="p">:</span> <span class="n">future</span> <span class="p">,]))</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="c1"># will give the exception raised</span>
        <span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="input">
<h3>input<a class="headerlink" href="#input" title="Link to this heading">#</a></h3>
<p>Process an input. Allows for user input during a run.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">)</span>  <span class="c1"># customize prompt</span>
</pre></div>
</div>
</section>
<section id="checkpoint">
<h3>checkpoint<a class="headerlink" href="#checkpoint" title="Link to this heading">#</a></h3>
<p>Instruct the RunEngine to create a checkpoint so that we can rewind to this
point if necessary.</p>
</section>
<section id="clear-checkpoint">
<h3>clear_checkpoint<a class="headerlink" href="#clear-checkpoint" title="Link to this heading">#</a></h3>
<p>Clear a set checkpoint.</p>
</section>
<section id="rewindable">
<h3>rewindable<a class="headerlink" href="#rewindable" title="Link to this heading">#</a></h3>
</section>
<section id="pause">
<h3>pause<a class="headerlink" href="#pause" title="Link to this heading">#</a></h3>
<p>Request the run engine to pause</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;pause&#39;</span><span class="p">,</span> <span class="n">defer</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="kickoff">
<h3>kickoff<a class="headerlink" href="#kickoff" title="Link to this heading">#</a></h3>
<p>Start a flyscan object.</p>
</section>
<section id="collect">
<h3>collect<a class="headerlink" href="#collect" title="Link to this heading">#</a></h3>
<p>Collect data cached by a flyer and emit descriptor and event documents.
This calls the <code class="docutils literal notranslate"><span class="pre">obj.collect()</span></code> method.</p>
</section>
<section id="complete">
<h3>complete<a class="headerlink" href="#complete" title="Link to this heading">#</a></h3>
<p>Tell a flyer, ‘stop collecting, whenever you are ready’.</p>
<p>This calls the method <code class="docutils literal notranslate"><span class="pre">obj.complete()</span></code> of the given object. The flyer returns
a status object. Some flyers respond to this command by stopping collection and
returning a finished status object immediately. Other flyers finish their given
course and finish whenever they finish, irrespective of when this command is
issued.</p>
</section>
<section id="configure">
<h3>configure<a class="headerlink" href="#configure" title="Link to this heading">#</a></h3>
<p>Configure an object.</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;configure&#39;</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>which results in this call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">object</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="subscribe">
<h3>subscribe<a class="headerlink" href="#subscribe" title="Link to this heading">#</a></h3>
<p>Add a subscription after the run has started.</p>
<p>This, like subscriptions passed to __call__, will be removed at the
end by the RunEngine.</p>
<p>Expected message object is:</p>
<blockquote>
<div><p>Msg(‘subscribe’, None, callback_function, document_name)</p>
</div></blockquote>
<p>where <cite>document_name</cite> is one of:</p>
<blockquote>
<div><p>{‘start’, ‘descriptor’, ‘event’, ‘stop’, ‘all’}</p>
</div></blockquote>
<p>and <cite>callback_function</cite> is expected to have a signature of:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">f(name,</span> <span class="pre">document)</span></code></p>
<p>where name is one of the <code class="docutils literal notranslate"><span class="pre">document_name</span></code> options and <code class="docutils literal notranslate"><span class="pre">document</span></code>
is one of the document dictionaries in the event model.</p>
</div></blockquote>
<p>See the docstring of bluesky.run_engine.Dispatcher.subscribe() for more
information.</p>
</section>
<section id="unsubscribe">
<h3>unsubscribe<a class="headerlink" href="#unsubscribe" title="Link to this heading">#</a></h3>
<p>Remove a subscription during a call – useful for a multi-run call
where subscriptions are wanted for some runs but not others.</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;unsubscribe&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">TOKEN</span><span class="p">)</span>
<span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;unsubscribe&#39;</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="n">TOKEN</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">TOKEN</span></code> is the return value from <code class="docutils literal notranslate"><span class="pre">RunEngine._subscribe()</span></code></p>
</section>
<section id="open-run">
<h3>open_run<a class="headerlink" href="#open-run" title="Link to this heading">#</a></h3>
<p>Instruct the RunEngine to start a new “run”</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;open_run&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> are any additional metadata that should go into the RunStart
document</p>
</section>
<section id="close-run">
<h3>close_run<a class="headerlink" href="#close-run" title="Link to this heading">#</a></h3>
<p>Instruct the RunEngine to write the RunStop document</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;close_run&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exit_status</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>if <em>exit_stats</em> and <em>reason</em> are not provided, use the values
stashed on the RE.</p>
</section>
<section id="drop">
<h3>drop<a class="headerlink" href="#drop" title="Link to this heading">#</a></h3>
<p>Drop a bundle of readings without emitting a completed Event document.</p>
<p>This is a command that abandons previous <code class="docutils literal notranslate"><span class="pre">create</span></code> and <code class="docutils literal notranslate"><span class="pre">read</span></code> commands
without emitting an event. This can be used to drop known bad events
(e.g. no beam) and keep the event document stream clean. It is safe to start
another <code class="docutils literal notranslate"><span class="pre">create</span></code>, <code class="docutils literal notranslate"><span class="pre">read</span></code>, <code class="docutils literal notranslate"><span class="pre">save</span></code> sequence after a <code class="docutils literal notranslate"><span class="pre">drop</span></code>.</p>
<p>This must be called after a <code class="docutils literal notranslate"><span class="pre">create</span></code> or a the scan will die and raise
<cite>IllegalMessageSequence</cite>.</p>
<p>This call returns <cite>None</cite> back to the co-routine.</p>
<p>This ignores all parts of the <cite>Msg</cite> except the command.</p>
</section>
<section id="monitor">
<h3>monitor<a class="headerlink" href="#monitor" title="Link to this heading">#</a></h3>
<p>Monitor a signal. Emit event documents asynchronously.</p>
<p>A descriptor document is emitted immediately. Then, a closure is
defined that emits Event documents associated with that descriptor
from a separate thread. This process is not related to the main
bundling process (create/read/save).</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;monitor&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;monitor&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;event-stream-name&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>where kwargs are passed through to <code class="docutils literal notranslate"><span class="pre">obj.subscribe()</span></code></p>
</section>
<section id="unmonitor">
<h3>unmonitor<a class="headerlink" href="#unmonitor" title="Link to this heading">#</a></h3>
<p>Stop monitoring; i.e., remove the callback emitting event documents.</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;unmonitor&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="stop">
<h3>stop<a class="headerlink" href="#stop" title="Link to this heading">#</a></h3>
<p>Stop a device.</p>
<p>Expected message object is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Msg</span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</pre></div>
</div>
<p>This amounts to calling <code class="docutils literal notranslate"><span class="pre">obj.stop()</span></code>.</p>
</section>
</section>
<section id="registering-custom-commands">
<h2>Registering Custom Commands<a class="headerlink" href="#registering-custom-commands" title="Link to this heading">#</a></h2>
<p>The RunEngine can be taught any new commands. They can be registered using the
following methods.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">register_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.register_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Register a new Message command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
<dt><strong>func</strong><span class="classifier">callable</span></dt><dd><p>This can be a function or a method. The signature is <cite>f(msg)</cite>.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.unregister_command.html#bluesky.run_engine.RunEngine.unregister_command" title="bluesky.run_engine.RunEngine.unregister_command"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.unregister_command()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.print_command_registry.html#bluesky.run_engine.RunEngine.print_command_registry" title="bluesky.run_engine.RunEngine.print_command_registry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.print_command_registry()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.commands.html#bluesky.run_engine.RunEngine.commands" title="bluesky.run_engine.RunEngine.commands"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RunEngine.commands</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">unregister_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.unregister_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Unregister a Message command.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>name</strong><span class="classifier">str</span></dt><dd></dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.register_command.html#bluesky.run_engine.RunEngine.register_command" title="bluesky.run_engine.RunEngine.register_command"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.register_command()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.print_command_registry.html#bluesky.run_engine.RunEngine.print_command_registry" title="bluesky.run_engine.RunEngine.print_command_registry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.print_command_registry()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.commands.html#bluesky.run_engine.RunEngine.commands" title="bluesky.run_engine.RunEngine.commands"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RunEngine.commands</span></code></a></dt><dd></dd>
</dl>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">commands</span></span></dt>
<dd><p>The list of commands available to Msg.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.register_command.html#bluesky.run_engine.RunEngine.register_command" title="bluesky.run_engine.RunEngine.register_command"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.register_command()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.unregister_command.html#bluesky.run_engine.RunEngine.unregister_command" title="bluesky.run_engine.RunEngine.unregister_command"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.unregister_command()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.print_command_registry.html#bluesky.run_engine.RunEngine.print_command_registry" title="bluesky.run_engine.RunEngine.print_command_registry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.print_command_registry()</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bluesky</span> <span class="kn">import</span> <span class="n">RunEngine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span> <span class="o">=</span> <span class="n">RunEngine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># to list commands</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="o">.</span><span class="n">commands</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">RunEngine.</span></span><span class="sig-name descname"><span class="pre">print_command_registry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bluesky/run_engine.html#RunEngine.print_command_registry"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>This conveniently prints the command registry of available
commands.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>Verbose</strong><span class="classifier">bool, optional</span></dt><dd></dd>
<dt><strong>verbose print. Default is False</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.register_command.html#bluesky.run_engine.RunEngine.register_command" title="bluesky.run_engine.RunEngine.register_command"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.register_command()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.unregister_command.html#bluesky.run_engine.RunEngine.unregister_command" title="bluesky.run_engine.RunEngine.unregister_command"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RunEngine.unregister_command()</span></code></a></dt><dd></dd>
<dt><a class="reference internal" href="generated/bluesky.run_engine.RunEngine.commands.html#bluesky.run_engine.RunEngine.commands" title="bluesky.run_engine.RunEngine.commands"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RunEngine.commands</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bluesky</span> <span class="kn">import</span> <span class="n">RunEngine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span> <span class="o">=</span> <span class="n">RunEngine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Print a very verbose list of currently registered commands</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">RE</span><span class="o">.</span><span class="n">print_command_registry</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="hardware.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">How Bluesky Interfaces with Hardware</p>
      </div>
    </a>
    <a class="right-next"
       href="run_engine.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">The RunEngine run loop</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#commands">Commands</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create">create</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#save">save</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read">read</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#null">null</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set">set</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stage-and-unstage">stage and unstage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#trigger">trigger</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sleep">sleep</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wait">wait</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wait-for">wait_for</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#input">input</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checkpoint">checkpoint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clear-checkpoint">clear_checkpoint</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rewindable">rewindable</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pause">pause</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#kickoff">kickoff</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#collect">collect</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complete">complete</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configure">configure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#subscribe">subscribe</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unsubscribe">unsubscribe</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-run">open_run</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#close-run">close_run</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drop">drop</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monitor">monitor</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unmonitor">unmonitor</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stop">stop</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#registering-custom-commands">Registering Custom Commands</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/bluesky/bluesky/edit/1.14.dev44+g59c87bb8/docs/msg.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="_sources/msg.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2015, Brookhaven National Lab.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>